"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _type=require("ramda/src/type"),_type2=_interopRequireDefault(_type),_identity=require("ramda/src/identity"),_identity2=_interopRequireDefault(_identity),_replace=require("ramda/src/replace"),_replace2=_interopRequireDefault(_replace),_always=require("ramda/src/always"),_always2=_interopRequireDefault(_always),_props=require("ramda/src/props"),_props2=_interopRequireDefault(_props),_equals=require("ramda/src/equals"),_equals2=_interopRequireDefault(_equals),_head=require("ramda/src/head"),_head2=_interopRequireDefault(_head),_ifElse=require("ramda/src/ifElse"),_ifElse2=_interopRequireDefault(_ifElse),_=require("ramda/src/__"),_2=_interopRequireDefault(_),_merge=require("ramda/src/merge"),_merge2=_interopRequireDefault(_merge),_clone=require("ramda/src/clone"),_clone2=_interopRequireDefault(_clone),_compose=require("ramda/src/compose"),_compose2=_interopRequireDefault(_compose),_stringifyQuery=require("./stringify-query"),_stringifyQuery2=_interopRequireDefault(_stringifyQuery),_stringifyJSON=require("./stringify-j-s-o-n"),_stringifyJSON2=_interopRequireDefault(_stringifyJSON),_responseType=require("./_/response-type"),_responseType2=_interopRequireDefault(_responseType),_api=require("./api"),_api2=_interopRequireDefault(_api),CONTENT_TYPE={JSON:"application/json",FORM:"application/x-www-form-urlencoded"};exports.default=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=a.method,i=void 0===t?"post":t,_=a.headers,u=void 0===_?{}:_,l=a.dataType,s=void 0===l?"json":l;u=(0,_compose2.default)((0,_merge2.default)({"Content-Type":CONTENT_TYPE.JSON},_2.default),_clone2.default)(u);var o=(0,_ifElse2.default)((0,_compose2.default)((0,_equals2.default)(CONTENT_TYPE.FORM),_head2.default,(0,_props2.default)(["Content-Type"])),(0,_compose2.default)(_always2.default,(0,_replace2.default)("?",""),_stringifyQuery2.default)(r),(0,_always2.default)((0,_ifElse2.default)((0,_compose2.default)((0,_equals2.default)("String"),_type2.default),_identity2.default,(0,_compose2.default)(_always2.default,_stringifyJSON2.default)(r))(r)))(u);return fetch((0,_api2.default)(e),{method:i,headers:u,body:o}).then(function(e){return e[(0,_responseType2.default)(s)]()})};